# 鲸管家 WhaMan

## Introduction

## Getting Started

- Go 1.16

1. 生成 swagger 文档：

```cmd
// go get -u github.com/swaggo/swag/cmd/swag
swag init
```

2. 运行

```cmd
go run main.go
```

## Design

### 进货模块 restock

功能接口：

|功能|说明|输入|输出|
|---|---|---|---|
|进货|新增进货订单，并新增库存，以及更新供应商交易额信息|进货信息(除进货订单外，还包括存放地点等库存信息)|是否成功|
|查询指定进货订单| |进货订单号|进货订单信息|
|查询所有进货订单|可指定查询条件和排序规则|查询条件、分页、排序规则|进货订单列表|
|更新指定进货订单|更新关联的库存(日期、供应商、型号信息无法更新)和供应商信息|待更新的进货订单(必须包含订单号)|是否成功|
|删除指定进货订单|删除关联的出货为零的库存，更新关联的供应商信息|进货订单号|是否成功|

进货订单实体：

|字段|说明|
|---|---|
|订单编号|主键，自增|
|日期||
|型号||
|规格||
|数量||
|单位||
|单价||
|金额||
|库存编号|外键(一个进货订单对应一个库存)|
|供应商编号|外键(一个进货订单对应一个供应商)|
|已付金额||
|付款方式||
|备注||

### 出货模块 sell

功能接口：

|功能|说明|输入|输出|
|---|---|---|---|
|出货|新增出货订单，并更新库存，以及客户交易额、未付款信息|出货信息，即出货订单信息|是否成功|
|查询指定出货订单| |出货订单号|出货订单信息|
|查询所有出货订单|可指定查询条件和排序规则|查询条件、分页、排序规则|出货订单列表|
|更新指定出货订单|更新关联的库存、客户信息|待更新的出货订单(必须包含订单号)|是否成功|
|删除指定出货订单|更新关联的库存、客户信息|出货订单号|是否成功|

出货订单实体：

|字段|说明|
|---|---|
|订单编号|主键，自增|
|状态|未结账、已结账、已退货|
|日期||
|客户订单号||
|客户批号||
|送货单号||
|库存编号|外键(一个出货订单对应一个库存，一个库存可对应多个出货订单)|
|规格||
|数量||
|单位||
|单价||
|金额||
|客户编号|外键(一个出货订单对应一个客户)|
|已付金额||
|收款方式||
|运费||
|回扣||
|税金||
|杂费||
|利润||
|备注||

### 库存模块 stock

功能接口：

|功能|说明|输入|输出|
|---|---|---|---|
|查询指定库存| |库存编号|库存信息|
|查询所有库存|可指定查询条件和排序规则|查询条件、分页、排序规则|库存列表|
|更新指定库存|只能更新部分信息|库存号、存放地点|是否成功|
|删除指定库存|只能删除未出货的库存，同时删除关联的进货订单|库存号|是否成功|

库存实体：

|字段|说明|
|---|---|
|库存编号|主键，自增|
|型号||
|规格||
|进货数量||
|出货数量||
|库存数量||
|单位||
|单价||
|金额||
|存放地点||
|备注||
|进货订单号|外键|

### 客户模块 customer

功能接口：

|功能|说明|输入|输出|
|---|---|---|---|
|新增客户| |客户信息|是否成功|
|查询指定客户| |客户编号|客户信息|
|查询所有客户|可指定查询条件和排序规则|查询条件、分页、排序规则|客户列表|
|更新指定客户| |客户编号、部分客户信息|是否成功|
|删除指定客户| |客户编号|是否成功|

客户实体：

|字段|说明|
|---|---|
|客户编号|主键|
|客户名|唯一|
|联系人||
|联系电话||
|交易额||
|未付款||

### 供应商模块 supplier

功能接口：

|功能|说明|输入|输出|
|---|---|---|---|
|新增供应商| |供应商信息|是否成功|
|查询指定供应商| |供应商编号|供应商信息|
|查询所有供应商|可指定查询条件和排序规则|查询条件、分页、排序规则|供应商列表|
|更新指定供应商| |供应商编号、供应商信息|是否成功|
|删除指定供应商| |供应商编号|是否成功|

供应商实体：

|字段|说明|
|---|---|
|供应商编号|主键
|供应商名|唯一|
|联系人||
|联系电话||
|交易额||
